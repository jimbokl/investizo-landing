<!doctype html><html lang="en">
<head>
<meta charset="utf-8">
<title id="page-title">Investizo Mini‑App</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>
<script type="module">
// Импортируем английскую локализацию
import translations from './locales/en.js';

// Функция для применения локализаций к элементам страницы
function applyTranslations() {
  // Устанавливаем заголовок страницы
  document.getElementById('page-title').textContent = translations.pageTitle;
  document.title = translations.pageTitle;
  
  // Устанавливаем основные тексты
  document.getElementById('main-heading').textContent = translations.mainHeading;
  document.getElementById('description').textContent = translations.description;
  
  // Устанавливаем текст кнопки
  document.getElementById('tg-btn').textContent = translations.telegramButton;
}

// Применяем переводы при загрузке страницы
document.addEventListener('DOMContentLoaded', applyTranslations);

function logClick() {
  // Получаем код из URL, если он есть, иначе используем 'web'
  const urlParams = new URLSearchParams(window.location.search);
  const code = urlParams.get('c') || 'web';
  
  // Отправляем запрос на /api/clk для логирования клика
  fetch(`/api/clk?c=${code}`)
    .then(() => {
      // После логирования перенаправляем на Telegram бота с правильным payload
      const payload = `pid-779350_${code}`;
      window.location.href = `https://t.me/InvestizoAppBot?start=${payload}`;
    })
    .catch(error => {
      console.error(translations.logClickError, error);
      // Даже если логирование не удалось, всё равно перенаправляем пользователя
      const payload = `pid-779350_${code}`;
      window.location.href = `https://t.me/InvestizoAppBot?start=${payload}`;
    });
}

// Делаем функцию logClick доступной глобально
window.logClick = logClick;
</script>
</head>
<body class="bg-gray-900 text-white">
<section class="min-h-screen flex flex-col items-center justify-center gap-6">
<h1 id="main-heading" class="text-4xl font-bold text-center">Investizo Mini‑App</h1>
<p id="description" class="max-w-xl text-center">
Открой счёт и начни торговать за 30 секунд прямо в Telegram.
</p>
<a id="tg-btn"
 class="px-8 py-4 bg-emerald-600 rounded-lg hover:bg-emerald-500 transition"
 href="#"
 onclick="logClick()">Перейти в Telegram‑бот</a>
</section>
</body>
</html>